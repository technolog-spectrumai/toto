{% extends "oya/base.html" %}
{% load static %}

{% block title %}Apply for Membership | {{ platform.site_name }}{% endblock %}

{% block content %}
<section
  :class="darkMode
    ? 'bg-primary-bg-dark text-text-main-dark'
    : 'bg-primary-bg-light text-text-main-light'"
  class="flex items-center justify-center px-6 py-16 min-h-screen transition-colors duration-300">

  <form method="POST"
        :class="darkMode
          ? 'bg-bubble-bg-dark border-accent-1 text-text-main-dark'
          : 'bg-bubble-bg-light border-accent-2 text-text-main-light'"
        class="w-full max-w-md p-6 rounded-lg shadow-md border space-y-6 transition-colors duration-300">

    {% csrf_token %}
    {% if form.non_field_errors %}
      <p class="text-sm text-warn-light dark:text-warn-dark font-medium text-center">
        {{ form.non_field_errors }}
      </p>
    {% endif %}

    <h2 :class="darkMode ? 'text-accent-dark' : 'text-accent-light'" class="text-xl font-bold text-center">
      Apply to {{ platform.site_name }}
    </h2>

    <div class="space-y-2">
      {{ form.email.label_tag }}
      {{ form.email }}
    </div>

    <div class="space-y-2">
      {{ form.branch.label_tag }}
      {{ form.branch }}
    </div>

    <button type="submit"
            :class="darkMode
              ? 'bg-accent-dark text-primary-bg-dark'
              : 'bg-accent-light text-primary-bg-light'"
            class="w-full py-2 font-semibold rounded hover:opacity-90 transition text-sm">
      Submit Application
    </button>

    <p class="text-center text-sm text-gray-500 dark:text-gray-400">
      Already applied?
      <a href="{% url 'parent_login' %}"
         class="font-medium underline text-accent-light dark:text-accent-dark hover:opacity-80">
        Log in instead
      </a>
    </p>

    {% if username %}
      <p class="text-center text-sm text-gray-500 dark:text-gray-400">
        Already have a verification code?
        <a href="{% url 'membership_verification' username %}"
           class="font-medium underline text-accent-light dark:text-accent-dark hover:opacity-80">
          Submit Code
        </a>
      </p>
    {% else %}
      <p class="text-center text-sm text-gray-500 dark:text-gray-400">
        Verification available after submitting
      </p>
    {% endif %}


  </form>
</section>
{% endblock %}
