<div class="ml-6 mt-2 bg-gray-100 p-3 border-t border-gray-300" x-data="{ open: false }">
    <!-- Author, Date & Time in Same Line -->
    <div class="flex items-center justify-between text-sm text-gray-500">
        <p class="font-semibold">{{ post.author.username }}</p>
        <p class="ml-2">{{ post.created_at }}</p>
    </div>

    <!-- Post Content & Chevron in Same Line -->
    <div class="flex items-center justify-between mt-2">
        <p>{{ post.content }}</p>
        <button @click="open = !open" class="text-[#1B3B6F] ml-2">
            <i x-show="!open" class="fas fa-chevron-down"></i>
            <i x-show="open" class="fas fa-chevron-up"></i>
        </button>
    </div>

    <!-- Collapsible Reply Form -->
    {% if post.depth < 3 %}
    <div x-show="open" class="mt-2">
        <form method="POST">
            {% csrf_token %}
            <input type="hidden" name="post_id" value="{{ post.id }}">
            <textarea name="content" placeholder="Reply to this reply..." class="w-full border rounded-lg p-2"></textarea>
            <button type="submit" class="mt-2 bg-[#1B3B6F] text-white py-1 px-3 rounded-lg hover:bg-[#143061]">
                Reply
            </button>
        </form>
    </div>
    {% endif %}

    <!-- Render Replies Recursively -->
    {% for child_post in post.child_posts.all %}
        <div class="border-t border-gray-300 mt-3 pt-3">
            {% include "forum/reply.html" with post=child_post %}
        </div>
    {% endfor %}
</div>
