{% load theme_tags %}

<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
  {% for article in articles %}
    <div
      class="p-4 rounded-lg transition"
      :class="darkMode
        ? '{{ theme|theme_class:"source_card:dark" }}'
        : '{{ theme|theme_class:"source_card:light" }}'">

      <h2 class="text-lg font-semibold mb-2">
        <a
          href="{% url 'article_detail' site.slug article.slug %}"
          :class="darkMode
            ? '{{ theme|theme_class:"footer_link:dark" }}'
            : '{{ theme|theme_class:"footer_link:light" }}'">
          {{ article.title }}
        </a>

        {% if article.is_draft %}
          <span
            class="ml-3 inline-block px-2 py-1 text-xs font-semibold rounded border transition-colors"
            :class="darkMode
              ? '{{ theme|theme_class:"draft_badge:dark" }}'
              : '{{ theme|theme_class:"draft_badge:light" }}'">
            Draft
          </span>
        {% endif %}
      </h2>

      <p
        class="text-xs mb-3"
        :class="darkMode
          ? '{{ theme|theme_class:"meta_text:dark" }}'
          : '{{ theme|theme_class:"meta_text:light" }}'">
        By <span class="font-semibold">{{ article.author.username }}</span> |
        {{ article.created_at|date:"F j, Y" }}
      </p>

      <p class="text-sm">{{ article.abstract|truncatewords:30 }}</p>
    </div>
  {% endfor %}
</div>
