{% load theme_tags %}
{# This partial expects: sources, site, user #}

<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
  {% for source in sources %}
    <div
      class="p-4 rounded-lg shadow border transition"
      :class="darkMode
        ? '{{ theme|theme_class:"source_card:dark" }}'
        : '{{ theme|theme_class:"source_card:light" }}'">

      <h2 class="text-lg font-semibold mb-2">
        <a
          href="{% url 'source_detail' site.slug source.pk %}"
          :class="darkMode
            ? '{{ theme|theme_class:"source_link:dark" }}'
            : '{{ theme|theme_class:"source_link:light" }}'">
          {{ source.title }}
        </a>
      </h2>

      {% if source.creator %}
        <p
          class="text-sm mb-1"
          :class="darkMode
            ? '{{ theme|theme_class:"meta_text:dark" }}'
            : '{{ theme|theme_class:"meta_text:light" }}'">
          {{ source.creator }}
        </p>
      {% endif %}

      <p
        class="text-xs mb-2"
        :class="darkMode
          ? '{{ theme|theme_class:"meta_text:dark" }}'
          : '{{ theme|theme_class:"meta_text:light" }}'">
        {{ source.get_type_display }}
        {% if source.publication_date %}| {{ source.publication_date|date:"F j, Y" }}{% endif %}
      </p>

      {% if source.url %}
        <p>
          <a
            href="{{ source.url }}"
            target="_blank"
            rel="noopener"
            :class="darkMode
              ? '{{ theme|theme_class:"source_link:dark" }}'
              : '{{ theme|theme_class:"source_link:light" }}'">
            View link
          </a>
        </p>
      {% endif %}
    </div>
  {% endfor %}
</div>
